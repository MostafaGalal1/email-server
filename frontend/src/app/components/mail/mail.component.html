<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  
<div class = "dark-layout" [ngStyle]="{'display' : (getFolderVisible || getContactVisible)? 'block':'none'}">
<app-folder-box class="folder-box" [ngStyle]="{'display' : getFolderVisible ? 'block':'none'}" (clickOutside)="hideFolder()"></app-folder-box>
<app-contact-box class="contact-box" [ngStyle]="{'display' :  getContactVisible ? 'block':'none'}" (clickOutside)="hideContact()"></app-contact-box>
</div>
<div class = "layout">
  <div class = "main-bar">
    <span class="pigeon-span">
      <img class="pigeon" src="./assets/pigeon-symbol.png">
    </span>
    <span>
      <img class="pigeon-text" src="./assets/pigeonon-text.png">
    </span>
    <div class="main-buttons">
      <div class = "user-info">
        <button class = "state-button" #stateButton type = "button"><span class="material-symbols-outlined">radio_button_checked</span></button>
        <label class = "usermail">MostafaM.Galal@pigeonon.com</label>
      </div>
      <button class = "settings-button" #settingsButton type = "button"><span class="material-symbols-outlined">settings</span></button>
      <button class = "logout-button" #logoutButton type = "button"><span class="material-symbols-outlined">logout</span></button>
    </div>
  </div>
  <div class="options">
    <br>
    <div class = "options-container">
    <aside>
      <div class="main-folders">
      <div class="options-div" (click)="composeIt()">
        <span class="material-symbols-outlined">edit</span>
        <input type="button" class="button" value="Compose">
      </div>
      <div class="options-div" (click)="getEmails('inbox')">
        <span class="material-symbols-outlined">inbox</span>
        <input type="button" class="button" value="Inbox">
      </div>
      <div class="options-div" (click)="getEmails('sent')">
        <span class="material-symbols-outlined">send</span>
        <input type="button" class="button" value="Sent">
      </div>
      <div class="options-div" (click)="getEmails('draft')">
        <span class="material-symbols-outlined">draft</span>
        <input type="button" class="button" value="Draft">
      </div>
      <div class="options-div" (click)="getEmails('trash')">
        <span class="material-symbols-outlined">delete</span>
        <input type="button" class="button" value="Trash">
      </div>
    </div>
      <br>
      <div class="folders-div">
        <div class="g-cl">
          <span class="material-symbols-outlined">folder</span>
          <label>Folders</label>
          <button class = "add-folder-button" #folderButton type = "button" (click)="addFolder()"><span class="material-symbols-outlined">add</span></button>
        </div>
        <div class="folders-list">
          <ul *ngFor="let list of getfolders ; let i=index">
            <li>
              <div class="fsublist-div">
                <span class="material-symbols-outlined">folder</span>
                <input type="button" class="button" value={{list}}>
                <button class = "edit-button" #editButton type = "button"><span class="material-symbols-outlined">more_vert</span></button>
              </div>
            </li>
           </ul>
        </div>
      </div>
      <div class="contacts-div">
        <div class="g-cl">
          <span class="material-symbols-outlined">contacts</span>
          <label>Contacts</label>
          <button class = "add-contact-button" #contactButton type = "button" (click)="addContact()"><span class="material-symbols-outlined">add</span></button>
        </div>
        <div class="contacts-list">
          <ul *ngFor="let list of getcontacts; let i=index">
            <li>
              <div class="fsublist-div" autofocus>
                <span class="material-symbols-outlined">account_circle</span>
                <input type="button" class="button" value={{list}}>
                <button class = "edit-button" #editButton type = "button"><span class="material-symbols-outlined">more_vert</span></button>
              </div>
            </li>
           </ul>
        </div>
      </div>
    </aside>
    </div>
  </div>
  <div class="container">
    <div class = "navigation-bar">
      <button class = "refresh-button" #refreshButton type = "button" (click)="refreshEmails()"><span class="material-symbols-outlined">refresh</span></button>
      <div class = "search-container" [ngStyle]="{'background-color': searchColor}">
        <button class = "Search-button" type = "button"><span class="material-symbols-outlined">search</span></button>
        <input type = "text" id = "search_text" placeholder="Search in mail" #searchBar (focus)="whitenBar()" (clickOutside)="darkenBar()">
        <button class = "reset-button" type = "button" #resetButton><span class="material-symbols-outlined">close</span></button>
        <button class = "filter-button" type = "button" #filterButton [ngStyle]="{'display' : filterBoxVisible? 'none':''}" value="Search" (click)="showFilter()"><span class="material-symbols-outlined">tune</span></button>
      </div>
      <button class = "return-button" #returnButton type = "button" [ngStyle]="{'display' : emailVisible? '':'none'}" (click)="backToFolder()"><span class="material-symbols-outlined">keyboard_return</span></button>
      <button class = "select-button" #selectButton [ngStyle]="{'display' : !emailVisible? '':'none'}" type = "button" (click)="selectAll()"><span class="material-symbols-outlined">{{checkAll? "check_box":"check_box_outline_blank"}}</span></button>
      <button class = "delete-button" #deleteButton [ngStyle]="{'display' : buttonsVisible? '':'none'}" type = "button" (click)="deleteEmail()"><span class="material-symbols-outlined">delete</span></button>
      <button class = "move-button" #moveButton [ngStyle]="{'display' : buttonsVisible? '':'none'}" type = "button" (click)="moveEmail()"><span class="material-symbols-outlined">drive_file_move</span></button>
      <button class = "left-nav-button" #leftNavButton [ngStyle]="{'display' : emailVisible? '':'none'}" type = "button" (click)="navigateEmails(false)"><span class="material-symbols-outlined">arrow_back_ios</span></button>
      <button class = "right-nav-button" #rightNavButton [ngStyle]="{'display' : emailVisible? '':'none'}" type = "button" (click)="navigateEmails(true)"><span class="material-symbols-outlined">arrow_forward_ios</span></button>
    </div>
    <app-filter-search class = "filter-search" #filterSearch [ngStyle]="{'display' : filterBoxVisible? '':'none'}" (clickOutside)="hideFilter()"></app-filter-search>
    <app-compose-box class = "compose-box" #composeBox [ngStyle]="{'display' : getcomposeVisible? '':'none'}" (clickOutside)="hideCompose()"></app-compose-box>
    <div class="emails-container">
      <div class = "email-preview" [ngStyle]="{'display' : emailVisible? 'block':'none'}">
        <div class = "email-pad">
          <div>
            <h2 class="email-subject">{{currentEmail.subject}}</h2>
          </div>
          <div>
            <h4>{{currentEmail.sender}}</h4>  
            <h5>{{currentEmail.recievers}}</h5>
            <p>{{currentEmail.body}}</p>
          </div>
        </div>
      </div>
      <table class = "emails-table" [cellSpacing]="0" role="grid" aria-readonly="true" [ngStyle]="{'display' : !emailVisible? '':'none'}">
        <tbody>
            <tr class="table-headers">  
              <th class="check-column" >chk</th> 
              <th class="sender-column" >sender</th>  
              <th class="recievers-column">recievers</th>  
              <th class="subject-column">subject</th>  
              <th class="body-column">body</th>
              <th class="date-column">date</th>
            </tr>
            <tr (click)="previewEmail(email.key)" *ngFor="let email of emailsQueue | keyvalue : returnZero | paginate : {itemsPerPage : 50, currentPage : page}" [id]="email.key">
              <td><input type="checkbox" [checked]="checkAll" (change)="emailSelection($event, email.key)"></td>  
              <td>{{email.value.sender}}</td>  
              <td>{{email.value.recievers}}</td>  
              <td>{{email.value.subject}}</td>  
              <td>{{email.value.body}}</td>  
              <td>{{email.value.date | date: email.value.date.getDate() === nowDate.getDate()? 'h:mm a':'MMM d'}}</td>  
            </tr>  
        </tbody>
      </table>
    </div>
    <div class = "paging">
      <pagination-controls class="paging-ngx" [autoHide]=true previousLabel="" nextLabel="" (pageChange)="resetSelection()" (pageChange)= "page = $event"></pagination-controls>
    </div>
  </div>
</div>